import { NxNonBrandedResponse } from "./getNonBrandedFoodInfo"
import { BrandedFoodResponse } from "./getBrandedFoodInfo"
import { NutritionixBrandedItem } from "./searchFoodIds"
import { Tables } from "types/supabase"

interface NxFoodServing extends Omit<Tables<"Serving">, "id" | "foodItemId"> {}
interface NxFoodNutrient extends Omit<Tables<"Nutrient">, "id" | "foodItemId"> {}

export interface NxFoodItemResponse extends Omit<Tables<"FoodItem">, "Serving" | "Nutrient"> {
  Serving: NxFoodServing[]
  Nutrient: NxFoodNutrient[]
  embedding?: number[]
}

type CombinedResponse = BrandedFoodResponse | NxNonBrandedResponse

export function isNutritionixBrandedItem(obj: any): obj is NutritionixBrandedItem {
  return "nix_item_id" in obj
}

function deduplicateServings(servings: NxFoodServing[]): NxFoodServing[] {
  const servingMap = new Map<string, NxFoodServing>()

  for (const serving of servings) {
    // Skip servings with 100 grams or in ounces
    if (serving.servingWeightGram === 100 || serving.servingName === "wt.oz") {
      continue
    }

    const weight = serving.servingWeightGram || serving.servingAlternateAmount
    const unit = serving.servingWeightGram ? "g" : "ml"
    const key = `${weight}-${unit}`
    const existingServing = servingMap.get(key)

    if (!existingServing) {
      servingMap.set(key, serving)
    } else {
      if (serving.servingName.length < existingServing.servingName.length) {
        servingMap.set(key, serving)
      }
    }
  }

  return Array.from(servingMap.values())
}

export function mapFoodResponseToFoodItem(response: CombinedResponse): NxFoodItemResponse[] {
  console.log("nxresponse", response.foods[0].brand_name ? `${response.foods[0].food_name} - ${response.foods[0].brand_name}` : response.foods[0].food_name)
  return response.foods.map((food) => {
    let default_serving_name = `${food.serving_qty} ${food.serving_unit}`
    // Preprocessing step to convert serving units from oz to g or ml
    if (food.serving_unit === "fl oz") {
      food.serving_unit = "ml"
      food.serving_qty *= 29.5735 // Convert fluid ounces to milliliters
      food.nf_metric_qty = food.serving_qty
    } else if (food.serving_unit === "oz") {
      food.serving_unit = "g"
      food.serving_qty *= 28.3495 // Convert ounces to grams
      food.nf_metric_qty = food.serving_qty
    }

    let weightInGrams = null
    if (food.serving_weight_grams) {
      weightInGrams = food.serving_weight_grams
    } else if (food.nf_metric_uom == "g") {
      weightInGrams = food.nf_metric_qty
    }

    let liquidAmountInMl = null
    if (food.serving_unit == "ml") {
      console.log("food.serving_unit", food.serving_unit)
      console.log("food.serving_qty", food.serving_qty)
      liquidAmountInMl = food.serving_qty
    } else if (food.nf_metric_uom == "ml") {
      liquidAmountInMl = food.nf_metric_qty
    }

    let isWeightUnknown = food.serving_weight_grams == null && food.nf_metric_qty == null
    if (isWeightUnknown) {
      food.serving_weight_grams = 10
    }

    // Extract trans fat from full_nutrients array
    const transFatNutrient = food.full_nutrients.find((nutrient) => nutrient.attr_id === 605)
    const transFat = transFatNutrient ? transFatNutrient.value : null

    // Extract added sugar from full_nutrients array
    const addedSugarNutrient = food.full_nutrients.find((nutrient) => nutrient.attr_id === 539)
    const addedSugar = addedSugarNutrient ? addedSugarNutrient.value : null

    const nutrients = [
      {
        nutrientName: "Cholesterol",
        nutrientUnit: "mg",
        nutrientAmountPerDefaultServing: food.nf_cholesterol || -1
      },
      {
        nutrientName: "Sodium",
        nutrientUnit: "mg",
        nutrientAmountPerDefaultServing: food.nf_sodium || -1
      },
      {
        nutrientName: "Potassium",
        nutrientUnit: "mg",
        nutrientAmountPerDefaultServing: food.nf_potassium || -1
      }
    ].filter(
      (nutrient) =>
        nutrient.nutrientAmountPerDefaultServing != undefined && nutrient.nutrientAmountPerDefaultServing != -1
    )

    return {
      id: 0,
      createdAtDateTime: new Date().toISOString(),
      UPC: food.upc ? Number(food.upc) : null,
      externalId: food.nix_item_id,
      name: food.food_name,
      brand: food.brand_name,
      knownAs: [],
      description: null,
      weightUnknown: isWeightUnknown,
      defaultServingWeightGram: weightInGrams,
      defaultServingLiquidMl: liquidAmountInMl,
      isLiquid: liquidAmountInMl ? true : false,
      kcalPerServing: Number(food.nf_calories) || 0,
      totalFatPerServing: Number(food.nf_total_fat) || 0,
      satFatPerServing: food.nf_saturated_fat,
      transFatPerServing: transFat,
      carbPerServing: food.nf_total_carbohydrate || 0,
      fiberPerServing: food.nf_dietary_fiber,
      sugarPerServing: food.nf_sugars,
      addedSugarPerServing: addedSugar,
      proteinPerServing: food.nf_protein || 0,
      lastUpdated: new Date().toISOString(),
      verified: true,
      userId: null,
      adaEmbedding: null,
      bgeBaseEmbedding: null,
      foodImageId: null,
      foodInfoSource: "NUTRITIONIX",
      messageId: null,
      Serving: deduplicateServings([
        {
          defaultServingAmount: null,
            servingWeightGram: food.serving_weight_grams || (food.nf_metric_uom === 'ml' ? food.nf_metric_qty : null),
            servingAlternateUnit: food.serving_unit,
          servingAlternateAmount: food.serving_qty,
          servingName: default_serving_name
        },
        ...(food.alt_measures
          ? food.alt_measures.map((alt) => ({
              defaultServingAmount: null,
              servingWeightGram: alt.serving_weight,
              servingAlternateUnit: alt.measure,
              servingAlternateAmount: alt.qty,
              servingName: alt.measure
            }))
          : [])
      ]),
      Nutrient: nutrients,

    }
  })
}

function testMapping() {
  const foodListResponse = JSON.parse(
    `{"common":[{"food_name":"peach gummies","serving_unit":"ring","tag_name":"peach rings","serving_qty":1,"common_type":null,"tag_id":"3450","photo":{"thumb":"https://d2eawub7utcl6.cloudfront.net/images/nix-apple-grey.png","highres":null,"is_user_uploaded":false},"locale":"en_US"},{"food_name":"fruit gummies","serving_unit":"pouch","tag_name":"fruit snack","serving_qty":1,"common_type":null,"tag_id":"19","photo":{"thumb":"https://nix-tag-images.s3.amazonaws.com/19_thumb.jpg"},"locale":"en_US"},{"food_name":"fiber cookie","serving_unit":"cookie","tag_name":"fiber one cookie","serving_qty":1,"common_type":null,"tag_id":"3159","photo":{"thumb":"https://d2eawub7utcl6.cloudfront.net/images/nix-apple-grey.png","highres":null,"is_user_uploaded":false},"locale":"en_US"},{"food_name":"gummies","serving_unit":"gummy bears","tag_name":"gummy","serving_qty":10,"common_type":null,"tag_id":"1194","photo":{"thumb":"https://nix-tag-images.s3.amazonaws.com/1194_thumb.jpg"},"locale":"en_US"},{"food_name":"fiber brownie","serving_unit":"brownie","tag_name":"brownie with added fiber","serving_qty":1,"common_type":null,"tag_id":"3160","photo":{"thumb":"https://nix-tag-images.s3.amazonaws.com/3160_thumb.jpg"},"locale":"en_US"},{"food_name":"fiber cereal","serving_unit":"cup (1 NLEA serving)","tag_name":"fiber cereal","serving_qty":0.5,"common_type":null,"tag_id":"1682","photo":{"thumb":"https://d2eawub7utcl6.cloudfront.net/images/nix-apple-grey.png","highres":null,"is_user_uploaded":false},"locale":"en_US"},{"food_name":"fiber one bar","serving_unit":"bar","tag_name":"fiber one bar","serving_qty":1,"common_type":null,"tag_id":"9418","photo":{"thumb":"https://nix-tag-images.s3.amazonaws.com/9418_thumb.jpg"},"locale":"en_US"},{"food_name":"fiber bar","serving_unit":"bar","tag_name":"fiber bar","serving_qty":1,"common_type":null,"tag_id":"1668","photo":{"thumb":"https://d2eawub7utcl6.cloudfront.net/images/nix-apple-grey.png","highres":null,"is_user_uploaded":false},"locale":"en_US"},{"food_name":"fiber one brownies","serving_unit":"brownie","tag_name":"brownie with added fiber","serving_qty":1,"common_type":null,"tag_id":"3160","photo":{"thumb":"https://nix-tag-images.s3.amazonaws.com/3160_thumb.jpg"},"locale":"en_US"},{"food_name":"fiber one cookie","serving_unit":"cookie","tag_name":"fiber one cookie","serving_qty":1,"common_type":null,"tag_id":"3159","photo":{"thumb":"https://d2eawub7utcl6.cloudfront.net/images/nix-apple-grey.png","highres":null,"is_user_uploaded":false},"locale":"en_US"},{"food_name":"fiber one brownie","serving_unit":"brownie","tag_name":"brownie with added fiber","serving_qty":1,"common_type":null,"tag_id":"3160","photo":{"thumb":"https://nix-tag-images.s3.amazonaws.com/3160_thumb.jpg"},"locale":"en_US"},{"food_name":"high fiber bread","serving_unit":"slice","tag_name":"double fiber bread","serving_qty":1,"common_type":null,"tag_id":"12922","photo":{"thumb":"https://d2eawub7utcl6.cloudfront.net/images/nix-apple-grey.png","highres":null,"is_user_uploaded":false},"locale":"en_US"},{"food_name":"lemon fiber bar","serving_unit":"bar","tag_name":"lemon fiber bar","serving_qty":1,"common_type":null,"tag_id":"8885","photo":{"thumb":"https://d2eawub7utcl6.cloudfront.net/images/nix-apple-grey.png","highres":null,"is_user_uploaded":false},"locale":"en_US"},{"food_name":"bread double fiber","serving_unit":"slice","tag_name":"double fiber bread","serving_qty":1,"common_type":null,"tag_id":"12922","photo":{"thumb":"https://d2eawub7utcl6.cloudfront.net/images/nix-apple-grey.png","highres":null,"is_user_uploaded":false},"locale":"en_US"},{"food_name":"cookie fiber one","serving_unit":"cookie","tag_name":"fiber one cookie","serving_qty":1,"common_type":null,"tag_id":"3159","photo":{"thumb":"https://d2eawub7utcl6.cloudfront.net/images/nix-apple-grey.png","highres":null,"is_user_uploaded":false},"locale":"en_US"},{"food_name":"brownie fiber one","serving_unit":"brownie","tag_name":"brownie with added fiber","serving_qty":1,"common_type":null,"tag_id":"3160","photo":{"thumb":"https://nix-tag-images.s3.amazonaws.com/3160_thumb.jpg"},"locale":"en_US"},{"food_name":"protein fiber bar","serving_unit":"bar","tag_name":"high protein fiber bar","serving_qty":1,"common_type":null,"tag_id":"13535","photo":{"thumb":"https://d2eawub7utcl6.cloudfront.net/images/nix-apple-grey.png","highres":null,"is_user_uploaded":false},"locale":"en_US"},{"food_name":"fiber one granola bar","serving_unit":"bar","tag_name":"fiber one bar","serving_qty":1,"common_type":null,"tag_id":"9418","photo":{"thumb":"https://nix-tag-images.s3.amazonaws.com/9418_thumb.jpg"},"locale":"en_US"},{"food_name":"high protein fiber bar","serving_unit":"bar","tag_name":"high protein fiber bar","serving_qty":1,"common_type":null,"tag_id":"13535","photo":{"thumb":"https://d2eawub7utcl6.cloudfront.net/images/nix-apple-grey.png","highres":null,"is_user_uploaded":false},"locale":"en_US"},{"food_name":"strong snax protein gummies","serving_unit":"package","tag_name":"strong snax protein gummies","serving_qty":1,"common_type":null,"tag_id":"13184","photo":{"thumb":"https://d2eawub7utcl6.cloudfront.net/images/nix-apple-grey.png","highres":null,"is_user_uploaded":false},"locale":"en_US"}],"branded":[{"food_name":"Fiber Suppplement, Fiber Well, Sugar Free Gummies","serving_unit":"gummies","nix_brand_id":"54208652d85da57d51a790fe","brand_name_item_name":"Vita Fusion Fiber Suppplement, Fiber Well, Sugar Free Gummies","serving_qty":2,"nf_calories":10,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/6124f9dcc5f0890008cce8c1.jpeg"},"brand_name":"Vita Fusion","region":1,"brand_type":2,"nix_item_id":"52fbd95bad2709a8940000ba","locale":"en_US"},{"food_name":"Mixed Berry Prebiotic Fiber Supplement Gummies","serving_unit":"gummies","nix_brand_id":"5464c77ea9ffad0169a89b37","brand_name_item_name":"Fiber Choice Mixed Berry Prebiotic Fiber Supplement Gummies","serving_qty":2,"nf_calories":15,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/64fb014e1254f40006ac98fb.jpeg"},"brand_name":"Fiber Choice","region":1,"brand_type":2,"nix_item_id":"64fb014d1254f40006ac98fa","locale":"en_US"},{"food_name":"Fiber Dietary Supplement, Gummies","serving_unit":"gummies","nix_brand_id":"5460edb2cd31bf2c3808b733","brand_name_item_name":"Fiber Advance Fiber Dietary Supplement, Gummies","serving_qty":3,"nf_calories":25,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/6239d7e73086df0006b13d5b.jpeg"},"brand_name":"Fiber Advance","region":1,"brand_type":2,"nix_item_id":"5cef87dde437ae4742f15e6e","locale":"en_US"},{"food_name":"Fiber Gummies","serving_unit":"gummies","nix_brand_id":"6468a946a8c4d5000622f7ea","brand_name_item_name":"Amazon Basics Fiber Gummies","serving_qty":2,"nf_calories":15,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/6468a946a8c4d5000622f7ec.jpeg"},"brand_name":"Amazon Basics","region":1,"brand_type":2,"nix_item_id":"6468a946a8c4d5000622f7eb","locale":"en_US"},{"food_name":"Fiber Gummies Fiber Supplement, Orange","serving_unit":"gummies","nix_brand_id":"5457c0ed53af3d475e6329ff","brand_name_item_name":"Meta Mucil Fiber Gummies Fiber Supplement, Orange","serving_qty":3,"nf_calories":25,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/639c50154711260008df8558.jpeg"},"brand_name":"Meta Mucil","region":1,"brand_type":2,"nix_item_id":"639c50154711260008df8557","locale":"en_US"},{"food_name":"Fiber Well Gummies, Sugar Free","serving_unit":"gummies","nix_brand_id":"54208652d85da57d51a790fe","brand_name_item_name":"Vita Fusion Fiber Well Gummies, Sugar Free","serving_qty":2,"nf_calories":10,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/5436905c55c6b11b6b6e5e1c.jpeg"},"brand_name":"Vita Fusion","region":1,"brand_type":2,"nix_item_id":"54368feb0b1c846c35c3c509","locale":"en_US"},{"food_name":"Orange Fiber Gummies","serving_unit":"gummies","nix_brand_id":"5457c0ed53af3d475e6329ff","brand_name_item_name":"Meta Mucil Orange Fiber Gummies","serving_qty":3,"nf_calories":25,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/63bbf4755c85fd00072ef5d4.jpeg"},"brand_name":"Meta Mucil","region":1,"brand_type":2,"nix_item_id":"63bbf4755c85fd00072ef5d3","locale":"en_US"},{"food_name":"Assorted Fruit Flavors Prebiotic Fiber Supplement Fiber Gummies","serving_unit":"gummies","nix_brand_id":"51db37cb176fe9790a899983","brand_name_item_name":"Benefiber Assorted Fruit Flavors Prebiotic Fiber Supplement Fiber Gummies","serving_qty":3,"nf_calories":25,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/6489a1367ebaf6000710c2a4.jpeg"},"brand_name":"Benefiber","region":1,"brand_type":2,"nix_item_id":"6489a1357ebaf6000710c2a3","locale":"en_US"},{"food_name":"Fiber Well Weight Management Gummies","serving_unit":"gummies","nix_brand_id":"526830f93203b9c33900000a","brand_name_item_name":"Vitafusion Fiber Well Weight Management Gummies","serving_qty":2,"nf_calories":10,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/536a9b91c3cba98a306af1cd.jpeg"},"brand_name":"Vitafusion","region":1,"brand_type":2,"nix_item_id":"528e6b608c43e6311f0001df","locale":"en_US"},{"food_name":"Good Fiber Gummies","serving_unit":"gummies","nix_brand_id":"51db37b2176fe9790a8985d9","brand_name_item_name":"Phillips Good Fiber Gummies","serving_qty":2,"nf_calories":15,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/62a343397ce68600065bffcf.jpeg"},"brand_name":"Phillips","region":1,"brand_type":2,"nix_item_id":"58b675463a8834ad6354819a","locale":"en_US"},{"food_name":"Fiber Good Gummies","serving_unit":"gummies","nix_brand_id":"51db37b2176fe9790a8985d9","brand_name_item_name":"Phillips Fiber Good Gummies","serving_qty":4,"nf_calories":50,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/5464cf24a9ffad0169a89d31.jpeg"},"brand_name":"Phillips","region":1,"brand_type":2,"nix_item_id":"5464c97e0f427cce040e0447","locale":"en_US"},{"food_name":"Fiber Gummies Supplement","serving_unit":"gummies","nix_brand_id":"51db37b9176fe9790a898bdd","brand_name_item_name":"Kroger Fiber Gummies Supplement","serving_qty":2,"nf_calories":15,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/6084238ccf07890006e4a645.jpeg"},"brand_name":"Kroger","region":1,"brand_type":2,"nix_item_id":"6084238c7c0a8e62559337fc","locale":"en_US"},{"food_name":"Fiber Gummies Dietary Supplement","serving_unit":"gummy vitamins","nix_brand_id":"5359816476afeffc0aae8677","brand_name_item_name":"Up & Up Fiber Gummies Dietary Supplement","serving_qty":2,"nf_calories":10,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/64cb8ab86887140006d8b980.jpeg"},"brand_name":"Up & Up","region":1,"brand_type":2,"nix_item_id":"5fdb635984130f4e557ea1a7","locale":"en_US"},{"food_name":"Fiber 4g Gummies","serving_unit":"gummies","nix_brand_id":"6468a946a8c4d5000622f7ea","brand_name_item_name":"Amazon Basics Fiber 4g Gummies","serving_qty":2,"nf_calories":15,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/647f13939c0e9c00072ff709.jpeg"},"brand_name":"Amazon Basics","region":1,"brand_type":2,"nix_item_id":"647f13939c0e9c00072ff708","locale":"en_US"},{"food_name":"Natural Orange Flavor Daily Fiber Gummies","serving_unit":"gummies","nix_brand_id":"51db37cf176fe9790a899cfb","brand_name_item_name":"Equate Natural Orange Flavor Daily Fiber Gummies","serving_qty":3,"nf_calories":15,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/65004719948e1600084789af.jpeg"},"brand_name":"Equate","region":1,"brand_type":2,"nix_item_id":"65004719948e1600084789ae","locale":"en_US"},{"food_name":"Fiber Gummies, Mixed Berry Fiber Supplement","serving_unit":"gummies","nix_brand_id":"5460edb2cd31bf2c3808b733","brand_name_item_name":"Fiber Advance Fiber Gummies, Mixed Berry Fiber Supplement","serving_qty":2,"nf_calories":15,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/5460f3f5388fc43c2fa07593.jpeg"},"brand_name":"Fiber Advance","region":1,"brand_type":2,"nix_item_id":"5460ed7f388fc43c2fa07358","locale":"en_US"},{"food_name":"Fit Fiber Supplement, Gummies","serving_unit":"gummies","nix_brand_id":"558833396e50c01255556658","brand_name_item_name":"Fiber Well Fit Fiber Supplement, Gummies","serving_qty":2,"nf_calories":10,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/5588350b959361a7172205aa.jpeg"},"brand_name":"Fiber Well","region":1,"brand_type":2,"nix_item_id":"558832d9fd50fd757218d4b6","locale":"en_US"},{"food_name":"High Fiber Gummies Fiber Supplement","serving_unit":"gummies","nix_brand_id":"51db37b1176fe9790a8984d6","brand_name_item_name":"Walgreens High Fiber Gummies Fiber Supplement","serving_qty":3,"nf_calories":25,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/5f475ffee8bbf39620c97b19.jpeg"},"brand_name":"Walgreens","region":1,"brand_type":2,"nix_item_id":"5f475ff849492d3640b29f22","locale":"en_US"},{"food_name":"Fiber Supplement Gummies, Orange","serving_unit":"gummies","nix_brand_id":"5457c0ed53af3d475e6329ff","brand_name_item_name":"Meta Mucil Fiber Supplement Gummies, Orange","serving_qty":3,"nf_calories":25,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/638889af5dc6cf0008c13fa9.jpeg"},"brand_name":"Meta Mucil","region":1,"brand_type":2,"nix_item_id":"638889af5dc6cf0008c13fa8","locale":"en_US"},{"food_name":"Advanced Fiber Gummies with Natural Chicory Root","serving_unit":"gummies","nix_brand_id":"5c0b6cae7d27bab022535586","brand_name_item_name":"Nature's Nutrition Advanced Fiber Gummies with Natural Chicory Root","serving_qty":3,"nf_calories":25,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/6490370477df0c0006e8954c.jpeg"},"brand_name":"Nature's Nutrition","region":1,"brand_type":2,"nix_item_id":"6490370377df0c0006e8954b","locale":"en_US"}]}`
  )
  const foodResponse = JSON.parse(
    `{"foods":[{"food_name":"Fiber Gummies Fiber Supplement, Orange","brand_name":"Meta Mucil","serving_qty":3,"serving_unit":"gummies","serving_weight_grams":null,"nf_metric_qty":null,"nf_metric_uom":"g","nf_calories":25,"nf_total_fat":null,"nf_saturated_fat":null,"nf_cholesterol":null,"nf_sodium":20,"nf_total_carbohydrate":10,"nf_dietary_fiber":5,"nf_sugars":2,"nf_protein":null,"nf_potassium":null,"nf_p":null,"full_nutrients":[{"attr_id":205,"value":10},{"attr_id":208,"value":25},{"attr_id":269,"value":2},{"attr_id":291,"value":5},{"attr_id":307,"value":20},{"attr_id":539,"value":0}],"nix_brand_name":"Meta Mucil","nix_brand_id":"5457c0ed53af3d475e6329ff","nix_item_name":"Fiber Gummies Fiber Supplement, Orange","nix_item_id":"639c50154711260008df8557","metadata":{},"source":8,"ndb_no":null,"tags":null,"alt_measures":null,"lat":null,"lng":null,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/639c50154711260008df8558.jpeg","highres":null,"is_user_uploaded":false},"note":null,"class_code":null,"brick_code":null,"tag_id":null,"updated_at":"2023-07-11T15:22:59+00:00","nf_ingredient_statement":"Inulin, Soluble Corn Fiber (Fibersol), Water, Xylitol; Less than 2% of: Pectin, Citric Acid (Ph Adjuster), Sodium Citrate, Natural Orange Flavor, Coconut Oil With Carnauba Wax, Color (Annatto)"}]}`
  )
  const longFoodResponse = JSON.parse(
    `{"foods":[{"food_name":"eggs","brand_name":null,"serving_qty":2,"serving_unit":"large","serving_weight_grams":100,"nf_calories":143,"nf_total_fat":9.51,"nf_saturated_fat":3.13,"nf_cholesterol":372,"nf_sodium":142,"nf_total_carbohydrate":0.72,"nf_dietary_fiber":0,"nf_sugars":0.37,"nf_protein":12.56,"nf_potassium":138,"nf_p":198,"full_nutrients":[{"attr_id":203,"value":12.56},{"attr_id":204,"value":9.51},{"attr_id":205,"value":0.72},{"attr_id":207,"value":1.06},{"attr_id":208,"value":143},{"attr_id":210,"value":0},{"attr_id":211,"value":0.37},{"attr_id":212,"value":0},{"attr_id":213,"value":0},{"attr_id":214,"value":0},{"attr_id":221,"value":0},{"attr_id":255,"value":76.15},{"attr_id":262,"value":0},{"attr_id":263,"value":0},{"attr_id":268,"value":599},{"attr_id":269,"value":0.37},{"attr_id":287,"value":0},{"attr_id":291,"value":0},{"attr_id":301,"value":56},{"attr_id":303,"value":1.75},{"attr_id":304,"value":12},{"attr_id":305,"value":198},{"attr_id":306,"value":138},{"attr_id":307,"value":142},{"attr_id":309,"value":1.29},{"attr_id":312,"value":0.072},{"attr_id":313,"value":1.1},{"attr_id":315,"value":0.028},{"attr_id":317,"value":30.7},{"attr_id":318,"value":540},{"attr_id":319,"value":160},{"attr_id":320,"value":160},{"attr_id":321,"value":0},{"attr_id":322,"value":0},{"attr_id":323,"value":1.05},{"attr_id":324,"value":82},{"attr_id":326,"value":2},{"attr_id":328,"value":2},{"attr_id":334,"value":9},{"attr_id":337,"value":0},{"attr_id":338,"value":503},{"attr_id":341,"value":0.01},{"attr_id":342,"value":0.5},{"attr_id":343,"value":0.06},{"attr_id":344,"value":0.06},{"attr_id":345,"value":0},{"attr_id":346,"value":0.01},{"attr_id":347,"value":0},{"attr_id":401,"value":0},{"attr_id":404,"value":0.04},{"attr_id":405,"value":0.457},{"attr_id":406,"value":0.075},{"attr_id":410,"value":1.533},{"attr_id":415,"value":0.17},{"attr_id":417,"value":47},{"attr_id":418,"value":0.89},{"attr_id":421,"value":293.8},{"attr_id":429,"value":0.1},{"attr_id":430,"value":0.3},{"attr_id":431,"value":0},{"attr_id":432,"value":47},{"attr_id":435,"value":47},{"attr_id":454,"value":0.3},{"attr_id":501,"value":0.167},{"attr_id":502,"value":0.556},{"attr_id":503,"value":0.671},{"attr_id":504,"value":1.086},{"attr_id":505,"value":0.912},{"attr_id":506,"value":0.38},{"attr_id":507,"value":0.272},{"attr_id":508,"value":0.68},{"attr_id":509,"value":0.499},{"attr_id":510,"value":0.858},{"attr_id":511,"value":0.82},{"attr_id":512,"value":0.309},{"attr_id":513,"value":0.735},{"attr_id":514,"value":1.329},{"attr_id":515,"value":1.673},{"attr_id":516,"value":0.432},{"attr_id":517,"value":0.512},{"attr_id":518,"value":0.971},{"attr_id":601,"value":372},{"attr_id":605,"value":0.038},{"attr_id":606,"value":3.126},{"attr_id":607,"value":0.004},{"attr_id":608,"value":0},{"attr_id":609,"value":0.004},{"attr_id":610,"value":0.006},{"attr_id":611,"value":0},{"attr_id":612,"value":0.033},{"attr_id":613,"value":2.231},{"attr_id":614,"value":0.811},{"attr_id":615,"value":0.003},{"attr_id":617,"value":3.411},{"attr_id":618,"value":1.555},{"attr_id":619,"value":0.048},{"attr_id":620,"value":0.188},{"attr_id":621,"value":0.058},{"attr_id":624,"value":0.004},{"attr_id":625,"value":0.007},{"attr_id":626,"value":0.201},{"attr_id":627,"value":0},{"attr_id":628,"value":0.027},{"attr_id":629,"value":0},{"attr_id":630,"value":0},{"attr_id":631,"value":0.007},{"attr_id":645,"value":3.658},{"attr_id":646,"value":1.911},{"attr_id":652,"value":0.008},{"attr_id":653,"value":0.022},{"attr_id":654,"value":0},{"attr_id":662,"value":0.003},{"attr_id":663,"value":0.023},{"attr_id":664,"value":0},{"attr_id":670,"value":0.012},{"attr_id":671,"value":0},{"attr_id":672,"value":0.018},{"attr_id":673,"value":0.198},{"attr_id":674,"value":3.388},{"attr_id":675,"value":1.531},{"attr_id":676,"value":0},{"attr_id":685,"value":0.012},{"attr_id":687,"value":0.012},{"attr_id":689,"value":0.023},{"attr_id":693,"value":0.026},{"attr_id":695,"value":0.012},{"attr_id":697,"value":0},{"attr_id":851,"value":0.036},{"attr_id":852,"value":0.001},{"attr_id":853,"value":0.022},{"attr_id":858,"value":0.013}],"nix_brand_name":null,"nix_brand_id":null,"nix_item_name":null,"nix_item_id":null,"upc":null,"consumed_at":"2021-01-19T13:00:00+00:00","metadata":{"is_raw_food":false},"source":1,"ndb_no":1123,"tags":{"item":"raweggs","measure":null,"quantity":"2","food_group":1,"tag_id":775},"alt_measures":[{"serving_weight":38,"measure":"small","seq":7,"qty":1},{"serving_weight":44,"measure":"medium","seq":6,"qty":1},{"serving_weight":50,"measure":"large","seq":1,"qty":1},{"serving_weight":63,"measure":"jumbo","seq":3,"qty":1},{"serving_weight":56,"measure":"extralarge","seq":2,"qty":1},{"serving_weight":243,"measure":"cup(4.86largeeggs)","seq":5,"qty":1},{"serving_weight":100,"measure":"g","seq":null,"qty":100},{"serving_weight":28.3495,"measure":"wt.oz","seq":null,"qty":1}],"lat":null,"lng":null,"meal_type":1,"photo":{"thumb":"https://nix-tag-images.s3.amazonaws.com/775_thumb.jpg","highres":"https://nix-tag-images.s3.amazonaws.com/775_highres.jpg","is_user_uploaded":false},"sub_recipe":null},{"food_name":"bacon","brand_name":null,"serving_qty":3,"serving_unit":"slices","serving_weight_grams":34.5,"nf_calories":161.46,"nf_total_fat":12.11,"nf_saturated_fat":4.13,"nf_cholesterol":34.16,"nf_sodium":580.98,"nf_total_carbohydrate":0.59,"nf_dietary_fiber":0,"nf_sugars":0,"nf_protein":11.7,"nf_potassium":172.16,"nf_p":133.86,"full_nutrients":[{"attr_id":203,"value":11.7024},{"attr_id":204,"value":12.1061},{"attr_id":205,"value":0.5865},{"attr_id":207,"value":1.9458},{"attr_id":208,"value":161.46},{"attr_id":221,"value":0},{"attr_id":255,"value":8.1593},{"attr_id":262,"value":0},{"attr_id":263,"value":0},{"attr_id":268,"value":675.51},{"attr_id":269,"value":0},{"attr_id":291,"value":0},{"attr_id":301,"value":3.795},{"attr_id":303,"value":0.3278},{"attr_id":304,"value":10.695},{"attr_id":305,"value":133.86},{"attr_id":306,"value":172.155},{"attr_id":307,"value":580.98},{"attr_id":309,"value":1.0557},{"attr_id":312,"value":0.0362},{"attr_id":315,"value":0.0076},{"attr_id":317,"value":17.4915},{"attr_id":318,"value":12.765},{"attr_id":319,"value":3.795},{"attr_id":320,"value":3.795},{"attr_id":321,"value":0},{"attr_id":322,"value":0},{"attr_id":323,"value":0.1449},{"attr_id":324,"value":5.865},{"attr_id":326,"value":0.138},{"attr_id":328,"value":0.138},{"attr_id":334,"value":0},{"attr_id":337,"value":0},{"attr_id":338,"value":0},{"attr_id":341,"value":0.4037},{"attr_id":342,"value":0.1794},{"attr_id":343,"value":0},{"attr_id":344,"value":0.0173},{"attr_id":345,"value":0.0035},{"attr_id":346,"value":0.0173},{"attr_id":347,"value":0},{"attr_id":401,"value":0},{"attr_id":404,"value":0.1932},{"attr_id":405,"value":0.08},{"attr_id":406,"value":3.6077},{"attr_id":410,"value":0.3795},{"attr_id":415,"value":0.1846},{"attr_id":417,"value":0},{"attr_id":418,"value":0.3761},{"attr_id":421,"value":30.8775},{"attr_id":430,"value":0},{"attr_id":431,"value":0},{"attr_id":432,"value":0},{"attr_id":435,"value":0},{"attr_id":454,"value":2.7945},{"attr_id":501,"value":0.1404},{"attr_id":502,"value":0.5189},{"attr_id":503,"value":0.5586},{"attr_id":504,"value":0.9708},{"attr_id":505,"value":1.0492},{"attr_id":506,"value":0.3233},{"attr_id":507,"value":0.1328},{"attr_id":508,"value":0.4903},{"attr_id":509,"value":0.4675},{"attr_id":510,"value":0.5965},{"attr_id":511,"value":0.76},{"attr_id":512,"value":0.4799},{"attr_id":513,"value":0.6755},{"attr_id":514,"value":1.1033},{"attr_id":515,"value":1.8019},{"attr_id":516,"value":0.533},{"attr_id":517,"value":0.4768},{"attr_id":518,"value":0.4927},{"attr_id":521,"value":0.0411},{"attr_id":601,"value":34.155},{"attr_id":605,"value":0.0497},{"attr_id":606,"value":4.1276},{"attr_id":607,"value":0},{"attr_id":608,"value":0},{"attr_id":609,"value":0},{"attr_id":610,"value":0},{"attr_id":611,"value":0},{"attr_id":612,"value":0.1522},{"attr_id":613,"value":2.6341},{"attr_id":614,"value":1.2693},{"attr_id":615,"value":0.0242},{"attr_id":617,"value":4.948},{"attr_id":618,"value":1.8378},{"attr_id":619,"value":0.079},{"attr_id":620,"value":0.058},{"attr_id":621,"value":0.0028},{"attr_id":624,"value":0.0048},{"attr_id":625,"value":0.0021},{"attr_id":626,"value":0.2684},{"attr_id":627,"value":0},{"attr_id":628,"value":0.1014},{"attr_id":629,"value":0.0014},{"attr_id":630,"value":0.0021},{"attr_id":631,"value":0.009},{"attr_id":645,"value":5.3579},{"attr_id":646,"value":2.1086},{"attr_id":652,"value":0.0062},{"attr_id":653,"value":0.0362},{"attr_id":654,"value":0.0007},{"attr_id":662,"value":0.0021},{"attr_id":663,"value":0.0359},{"attr_id":664,"value":0},{"attr_id":670,"value":0.0162},{"attr_id":671,"value":0},{"attr_id":672,"value":0.0773},{"attr_id":673,"value":0.2663},{"attr_id":674,"value":4.9118},{"attr_id":675,"value":1.8102},{"attr_id":676,"value":0.0021},{"attr_id":685,"value":0.0021},{"attr_id":687,"value":0.0362},{"attr_id":689,"value":0.0255},{"attr_id":693,"value":0.038},{"attr_id":695,"value":0.0114},{"attr_id":697,"value":0},{"attr_id":851,"value":0.0769},{"attr_id":852,"value":0.011},{"attr_id":853,"value":0.0145},{"attr_id":858,"value":0.0169}],"nix_brand_name":null,"nix_brand_id":null,"nix_item_name":null,"nix_item_id":null,"upc":null,"consumed_at":"2021-01-19T13:00:00+00:00","metadata":{"is_raw_food":false},"source":1,"ndb_no":10862,"tags":{"item":"bacon","measure":null,"quantity":"3.0","food_group":2,"tag_id":11},"alt_measures":[{"serving_weight":11.5,"measure":"slice","seq":1,"qty":1},{"serving_weight":34.5,"measure":"side","seq":80,"qty":1},{"serving_weight":34.5,"measure":"slices","seq":81,"qty":3},{"serving_weight":80,"measure":"cup","seq":82,"qty":1},{"serving_weight":11.5,"measure":"piece","seq":83,"qty":1},{"serving_weight":100,"measure":"g","seq":null,"qty":100},{"serving_weight":28.3495,"measure":"wt.oz","seq":null,"qty":1}],"lat":null,"lng":null,"meal_type":1,"photo":{"thumb":"https://nix-tag-images.s3.amazonaws.com/11_thumb.jpg","highres":"https://nix-tag-images.s3.amazonaws.com/11_highres.jpg","is_user_uploaded":false},"sub_recipe":null},{"food_name":"frenchtoast","brand_name":null,"serving_qty":1,"serving_unit":"slicewithoutsyrup","serving_weight_grams":83.55,"nf_calories":219.42,"nf_total_fat":10.71,"nf_saturated_fat":5.18,"nf_cholesterol":129.28,"nf_sodium":237.23,"nf_total_carbohydrate":23.15,"nf_dietary_fiber":1.11,"nf_sugars":3.98,"nf_protein":7.28,"nf_potassium":96.7,"nf_p":101.63,"full_nutrients":[{"attr_id":203,"value":7.2839},{"attr_id":204,"value":10.7125},{"attr_id":205,"value":23.1506},{"attr_id":207,"value":1.2081},{"attr_id":208,"value":219.4232},{"attr_id":210,"value":3.1313},{"attr_id":211,"value":0.0959},{"attr_id":212,"value":0.0036},{"attr_id":213,"value":0},{"attr_id":214,"value":0},{"attr_id":221,"value":0.0903},{"attr_id":255,"value":41.0244},{"attr_id":262,"value":0},{"attr_id":263,"value":0},{"attr_id":268,"value":918.1869},{"attr_id":269,"value":3.9823},{"attr_id":287,"value":0},{"attr_id":291,"value":1.1069},{"attr_id":301,"value":66.1465},{"attr_id":303,"value":1.6898},{"attr_id":304,"value":12.1661},{"attr_id":305,"value":101.6298},{"attr_id":306,"value":96.6987},{"attr_id":307,"value":237.2324},{"attr_id":309,"value":0.6835},{"attr_id":312,"value":0.0856},{"attr_id":313,"value":0.4738},{"attr_id":315,"value":0.2666},{"attr_id":317,"value":19.9921},{"attr_id":318,"value":413.4754},{"attr_id":319,"value":117.0516},{"attr_id":320,"value":118.1033},{"attr_id":321,"value":11.6013},{"attr_id":322,"value":0.0033},{"attr_id":323,"value":0.5388},{"attr_id":324,"value":29.9623},{"attr_id":325,"value":0},{"attr_id":326,"value":0.5},{"attr_id":328,"value":0.7366},{"attr_id":334,"value":2.7146},{"attr_id":337,"value":0.0488},{"attr_id":338,"value":144.4715},{"attr_id":341,"value":0.0025},{"attr_id":342,"value":0.1593},{"attr_id":343,"value":0.0159},{"attr_id":344,"value":0.015},{"attr_id":345,"value":0},{"attr_id":346,"value":0.0025},{"attr_id":347,"value":0},{"attr_id":401,"value":0.091},{"attr_id":404,"value":0.189},{"attr_id":405,"value":0.3053},{"attr_id":406,"value":1.9742},{"attr_id":410,"value":0.5308},{"attr_id":415,"value":0.0725},{"attr_id":417,"value":54.4175},{"attr_id":418,"value":0.3037},{"attr_id":421,"value":108.5466},{"attr_id":429,"value":0.025},{"attr_id":430,"value":1.0334},{"attr_id":431,"value":14},{"attr_id":432,"value":40.4175},{"attr_id":435,"value":64.4175},{"attr_id":454,"value":0.109},{"attr_id":501,"value":0.0913},{"attr_id":502,"value":0.2766},{"attr_id":503,"value":0.3456},{"attr_id":504,"value":0.5811},{"attr_id":505,"value":0.3791},{"attr_id":506,"value":0.179},{"attr_id":507,"value":0.1544},{"attr_id":508,"value":0.3763},{"attr_id":509,"value":0.2578},{"attr_id":510,"value":0.4143},{"attr_id":511,"value":0.3714},{"attr_id":512,"value":0.1705},{"attr_id":513,"value":0.3379},{"attr_id":514,"value":0.5672},{"attr_id":515,"value":1.6303},{"attr_id":516,"value":0.25},{"attr_id":517,"value":0.5398},{"attr_id":518,"value":0.4615},{"attr_id":521,"value":0},{"attr_id":601,"value":129.2775},{"attr_id":605,"value":0.2422},{"attr_id":606,"value":5.1763},{"attr_id":607,"value":0.2348},{"attr_id":608,"value":0.1453},{"attr_id":609,"value":0.0875},{"attr_id":610,"value":0.1852},{"attr_id":611,"value":0.1885},{"attr_id":612,"value":0.5747},{"attr_id":613,"value":2.5716},{"attr_id":614,"value":1.1161},{"attr_id":615,"value":0.0118},{"attr_id":617,"value":3.1817},{"attr_id":618,"value":0.9853},{"attr_id":619,"value":0.0558},{"attr_id":620,"value":0.0654},{"attr_id":621,"value":0.0193},{"attr_id":624,"value":0.0026},{"attr_id":625,"value":0.003},{"attr_id":626,"value":0.1659},{"attr_id":627,"value":0},{"attr_id":628,"value":0.0175},{"attr_id":629,"value":0.0004},{"attr_id":630,"value":0.0004},{"attr_id":631,"value":0.0018},{"attr_id":636,"value":2.9271},{"attr_id":638,"value":0},{"attr_id":639,"value":0},{"attr_id":641,"value":0.284},{"attr_id":645,"value":3.3733},{"attr_id":646,"value":1.1421},{"attr_id":652,"value":0.002},{"attr_id":653,"value":0.0481},{"attr_id":654,"value":0.0004},{"attr_id":662,"value":0.0008},{"attr_id":663,"value":0.2175},{"attr_id":664,"value":0},{"attr_id":670,"value":0.022},{"attr_id":671,"value":0},{"attr_id":672,"value":0.0045},{"attr_id":673,"value":0.1177},{"attr_id":674,"value":2.0532},{"attr_id":675,"value":0.5365},{"attr_id":676,"value":0},{"attr_id":685,"value":0.003},{"attr_id":687,"value":0.003},{"attr_id":689,"value":0.0058},{"attr_id":693,"value":0.2182},{"attr_id":695,"value":0.024},{"attr_id":696,"value":0},{"attr_id":697,"value":0},{"attr_id":851,"value":0.0314},{"attr_id":852,"value":0.0003},{"attr_id":853,"value":0.0055},{"attr_id":858,"value":0.0033}],"nix_brand_name":null,"nix_brand_id":null,"nix_item_name":null,"nix_item_id":null,"upc":null,"consumed_at":"2021-01-19T13:00:00+00:00","metadata":{"is_raw_food":false},"source":1,"ndb_no":1000271,"tags":{"item":"frenchtoast","measure":null,"quantity":"1.0","food_group":8,"tag_id":566},"alt_measures":[{"serving_weight":83.55,"measure":"slicewithoutsyrup","seq":1,"qty":1},{"serving_weight":60,"measure":"thinslicewithoutsyrup","seq":2,"qty":1},{"serving_weight":100,"measure":"g","seq":null,"qty":100},{"serving_weight":28.3495,"measure":"wt.oz","seq":null,"qty":1}],"lat":null,"lng":null,"meal_type":1,"photo":{"thumb":"https://nix-tag-images.s3.amazonaws.com/566_thumb.jpg","highres":"https://nix-tag-images.s3.amazonaws.com/566_highres.jpg","is_user_uploaded":false},"sub_recipe":null}]}`
  )

  const fairlifeMilk = JSON.parse(
    `{"foods":[{"food_name":"Milk, 2%","brand_name":"Fairlife","serving_qty":1,"serving_unit":"bottle","serving_weight_grams":null,"nf_metric_qty":240,"nf_metric_uom":"ml","nf_calories":120,"nf_total_fat":4.5,"nf_saturated_fat":3,"nf_cholesterol":20,"nf_sodium":120,"nf_total_carbohydrate":6,"nf_dietary_fiber":0,"nf_sugars":6,"nf_protein":13,"nf_potassium":400,"nf_p":null,"full_nutrients":[{"attr_id":203,"value":13},{"attr_id":204,"value":4.5},{"attr_id":205,"value":6},{"attr_id":208,"value":120},{"attr_id":269,"value":6},{"attr_id":291,"value":0},{"attr_id":301,"value":455},{"attr_id":303,"value":0},{"attr_id":306,"value":400},{"attr_id":307,"value":120},{"attr_id":318,"value":750},{"attr_id":324,"value":400},{"attr_id":328,"value":10},{"attr_id":401,"value":0},{"attr_id":601,"value":20},{"attr_id":605,"value":0},{"attr_id":606,"value":3}],"nix_brand_name":"Fairlife","nix_brand_id":"546a0a092bc0b27b2a676b70","nix_item_name":"Milk, 2%","nix_item_id":"5d0b35e53aba6bbd692c5f52","metadata":{},"source":8,"ndb_no":null,"tags":null,"alt_measures":null,"lat":null,"lng":null,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/5d0b35e90c35589d502de72b.jpeg","highres":null,"is_user_uploaded":false},"note":null,"class_code":null,"brick_code":null,"tag_id":null,"updated_at":"2020-09-22T12:02:47+00:00","nf_ingredient_statement":null}]}`
  )
  const fairlifeMilk2 = JSON.parse(
    `{"foods":[{"food_name":"2% Reduced Ultra-Filtered Milk","brand_name":"Fairlife","serving_qty":1,"serving_unit":"cup","serving_weight_grams":null,"nf_metric_qty":240,"nf_metric_uom":"ml","nf_calories":120,"nf_total_fat":4.5,"nf_saturated_fat":3,"nf_cholesterol":20,"nf_sodium":120,"nf_total_carbohydrate":6,"nf_dietary_fiber":0,"nf_sugars":6,"nf_protein":13,"nf_potassium":400,"nf_p":null,"full_nutrients":[{"attr_id":203,"value":13},{"attr_id":204,"value":4.5},{"attr_id":205,"value":6},{"attr_id":208,"value":120},{"attr_id":269,"value":6},{"attr_id":291,"value":0},{"attr_id":301,"value":380},{"attr_id":303,"value":0},{"attr_id":306,"value":400},{"attr_id":307,"value":120},{"attr_id":324,"value":200},{"attr_id":328,"value":5},{"attr_id":539,"value":0},{"attr_id":601,"value":20},{"attr_id":605,"value":0},{"attr_id":606,"value":3}],"nix_brand_name":"Fairlife","nix_brand_id":"546a0a092bc0b27b2a676b70","nix_item_name":"2% Reduced Ultra-Filtered Milk","nix_item_id":"5ffefe660027528b35b714bc","metadata":{},"source":8,"ndb_no":null,"tags":null,"alt_measures":null,"lat":null,"lng":null,"photo":{"thumb":"https://nutritionix-api.s3.amazonaws.com/5ffefe6915a83c3c4f88047a.jpeg","highres":null,"is_user_uploaded":false},"note":null,"class_code":null,"brick_code":null,"tag_id":null,"updated_at":"2021-01-13T14:06:34+00:00","nf_ingredient_statement":null}]}`
  )
  console.dir(fairlifeMilk, { depth: null })
  console.dir(mapFoodResponseToFoodItem(fairlifeMilk), { depth: null })
  console.dir(fairlifeMilk2, { depth: null })
  console.dir(mapFoodResponseToFoodItem(fairlifeMilk2), { depth: null })
  //console.dir(mapFoodResponseToFoodItem(longFoodResponse), { depth: null })
}

//testMapping()


// const foodItem = JSON.parse(`{"foods":[{"food_name":"Beer, Hazy Juicy Pale Ale, Moon Haze","brand_name":"Blue Moon","serving_qty":12,"serving_unit":"fl oz","serving_weight_grams":null,"nf_metric_qty":355,"nf_metric_uom":"ml","nf_calories":180,"nf_total_fat":0,"nf_saturated_fat":null,"nf_cholesterol":null,"nf_sodium":null,"nf_total_carbohydrate":15.100000381469727,"nf_dietary_fiber":null,"nf_sugars":null,"nf_protein":2.299999952316284,"nf_potassium":null,"nf_p":null,"full_nutrients":[{"attr_id":203,"value":2.3},{"attr_id":204,"value":0},{"attr_id":205,"value":15.1},{"attr_id":208,"value":180}],"nix_brand_name":"Blue Moon","nix_brand_id":"53f21a9a6d6d4bf86c32acf1","nix_item_name":"Beer, Hazy Juicy Pale Ale, Moon Haze","nix_item_id":"62f3908b0082cc0006d94eea","metadata":{},"source":8,"ndb_no":null,"tags":null,"alt_measures":null,"lat":null,"lng":null,"photo":{"thumb":"https://assets.syndigo.com/e13e5852-9de2-4085-9b6e-65e3b1bd452e","highres":null,"is_user_uploaded":false},"note":null,"class_code":null,"brick_code":null,"tag_id":null,"updated_at":"2023-03-01T04:00:29+00:00","nf_ingredient_statement":"Water, Barley Malt, Wheat, Oats, Yeast, Hops, Dried Whole Oranges."}]}`)

// console.dir(mapFoodResponseToFoodItem(foodItem), { depth: null })